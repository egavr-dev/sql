# Lesson 8

## Links

[link lesson](https://www.youtube.com/watch?v=tRdpZjmtftY&list=PLzvuaEeolxkz4a0t4qhA0pxmttG8ZbBtd&index=33)

## Получение части строк из результата с помощью Limit и Offset

Limit и Offset позволяют нам выводить определенное количество строк в результате выборки.

Как пример, допустим, мы делаем брошюру со всеми фильмами которые есть в магазине, на каждой странице брошюры мы отображаем по 50 фильмов, вот нам так хочется. Соответственно, перед нами задача получить первые 50 фильмов, затем следующие 50 фильмов и так далее пока фильмы не закончатся в базе данных.

Реализуем такую логику так, выведем первые 50 фильмов отсортированные по названию для начала.
LIMIT нам указывает сколько строчек вывести

```sql
select 
    f.title 
from film f
order by f.title
limit 50;
```

Теперь если нам нужно получить вторые 50 фильмов, мы можем сделать новый запрос со следующими фильмами
OFFSET нам указывает сколько строчек пропустить

```sql
select 
    f.title 
from film f
order by f.title
limit 50
offset 50;
```

Когда мы используем LIMIT и OFFSET, обязательно должна быть указана сортировка.
Так как если ее не указать, то записи могут идти другим порядком. Поэтому нужно быть уверенными в каком порядке идут записи, что бы не дублировать значения в выборках.

Так же при выполнении LIMIT и OFFSET план выполнения запроса меняется, и действительно, когда мы получаем часть строк от результата, мы можем сильно экономить на ресурсах, запрос может выполнится быстрее

Когда мы хотим получать например с 501-ой строки, и до конца все оставшиеся, запрос будет таким

```sql
select 
    f.title 
from film f
order by f.title
offset 500;
```

Есть еще вариант такого же итога, но другим синтаксисом.
применяя LIMIT ALL что означает что мы не указывает ограничений на количество выводимых записей, но указываем сколько пропустить строк.

```sql
select 
    f.title 
from film f
order by f.title
limit all
offset 500;
```

Или можно еще так:
LIMIT NULL тоже означает что на количество выводимых строк мы не накладываем ограничений.

```sql
select 
    f.title 
from film f
order by f.title
limit null
offset 500;
```

LIMIT и OFFSET мы используем при пагинации.
Пагинация - это когда мы отображаем результат запроса на странице, а таких страниц может быть столько сколько нужно.
Вот для таких страниц, кода мы например получаем 10-ую страницу, и только с ней работаем, получаем с нее список товаров например, тогда и используются такие запросы.

Сама программа DBeaver делает такие запросы она не выводит сразу все записи, можно видеть '200+' что значит вывел 200 записей, но есть еще.
Такое поведение бережет ресурсы, и ускоряет работу.
Совсем необязательно выводить сразу все.
